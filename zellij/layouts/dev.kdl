// Default development layout - Neovim + lazygit + claude + terminal
// Use: zellij-dev (auto-detects light/dark theme)
// Swap layouts: Alt+{ / Alt+} to cycle between coding, wide, split, focus modes
// Floating toggle: Alt+f or Alt+w

layout {
    // zjstatus at top - shows mode, tabs, git, session
    pane size=1 borderless=true {
        plugin location="file:~/.config/zellij/plugins/zjstatus.wasm" {
            format_left  "#[fg=blue,bold]{session} {mode}"
            format_center "{tabs}"
            format_right "{command_git_branch} {datetime}"
            format_space "#[bg=default] "

            mode_normal        "#[fg=green,bold] NORMAL"
            mode_pane          "#[fg=yellow,bold] PANE"
            mode_tab           "#[fg=cyan,bold] TAB"
            mode_resize        "#[fg=magenta,bold] RESIZE"
            mode_scroll        "#[fg=blue,bold] SCROLL"
            mode_session       "#[fg=red,bold] SESSION"
            mode_move          "#[fg=orange,bold] MOVE"
            mode_locked        "#[fg=red,bold,blink] LOCKED"

            tab_normal         "#[fg=#6272A4] {name}"
            tab_active         "#[fg=cyan,bold] {name}"

            command_git_branch_command "git branch --show-current 2>/dev/null"
            command_git_branch_format "#[fg=magenta] {stdout}"
            command_git_branch_interval "5"

            datetime           "#[fg=#6272A4] {format}"
            datetime_format    "%H:%M"
            datetime_timezone  "America/New_York"
        }
    }

    // Main content: Neovim (65%) + stacked panes (35%)
    pane split_direction="vertical" {
        pane command="/Users/jamescomputer/.local/bin/nvim-zellij" size="65%" focus=true {
            args "."
            name "editor"
        }
        pane size="35%" stacked=true {
            pane name="claude" command="claude" focus=true
            pane name="lazygit" command="lazygit"
            pane name="db" command="lazysql"
            pane name="term"
        }
    }

    // Keybinding hints at bottom
    pane size=2 borderless=true {
        plugin location="zellij:status-bar"
    }

    // ─── Swap Tiled Layouts (Alt+{ / Alt+}) ───

    swap_tiled_layout name="coding" {
        // Default: 65% editor, 35% stacked tools
        tab {
            pane size=1 borderless=true {
                plugin location="file:~/.config/zellij/plugins/zjstatus.wasm" {
                    format_left "#[fg=blue,bold]{session} {mode}"
                    format_center "{tabs}"
                    format_right "{command_git_branch} {datetime}"
                    format_space "#[bg=default] "
                    mode_normal "#[fg=green,bold] NORMAL"
                    mode_pane "#[fg=yellow,bold] PANE"
                    tab_normal "#[fg=#6272A4] {name}"
                    tab_active "#[fg=cyan,bold] {name}"
                    command_git_branch_command "git branch --show-current 2>/dev/null"
                    command_git_branch_format "#[fg=magenta] {stdout}"
                    command_git_branch_interval "5"
                    datetime "#[fg=#6272A4] {format}"
                    datetime_format "%H:%M"
                }
            }
            pane split_direction="vertical" {
                pane size="65%" focus=true
                pane size="35%" stacked=true {
                    pane
                    pane
                    pane
                    pane
                }
            }
            pane size=2 borderless=true {
                plugin location="zellij:status-bar"
            }
        }
    }

    swap_tiled_layout name="wide" {
        // Wide editor (80%), narrow stacked sidebar
        tab {
            pane size=1 borderless=true {
                plugin location="file:~/.config/zellij/plugins/zjstatus.wasm" {
                    format_left "#[fg=blue,bold]{session} {mode}"
                    format_center "{tabs}"
                    format_right "{command_git_branch} {datetime}"
                    format_space "#[bg=default] "
                    mode_normal "#[fg=green,bold] NORMAL"
                    mode_pane "#[fg=yellow,bold] PANE"
                    tab_normal "#[fg=#6272A4] {name}"
                    tab_active "#[fg=cyan,bold] {name}"
                    command_git_branch_command "git branch --show-current 2>/dev/null"
                    command_git_branch_format "#[fg=magenta] {stdout}"
                    command_git_branch_interval "5"
                    datetime "#[fg=#6272A4] {format}"
                    datetime_format "%H:%M"
                }
            }
            pane split_direction="vertical" {
                pane size="80%" focus=true
                pane size="20%" stacked=true {
                    pane
                    pane
                    pane
                    pane
                }
            }
            pane size=2 borderless=true {
                plugin location="zellij:status-bar"
            }
        }
    }

    swap_tiled_layout name="split" {
        // Editor top, tools bottom (good for wide monitors)
        tab {
            pane size=1 borderless=true {
                plugin location="file:~/.config/zellij/plugins/zjstatus.wasm" {
                    format_left "#[fg=blue,bold]{session} {mode}"
                    format_center "{tabs}"
                    format_right "{command_git_branch} {datetime}"
                    format_space "#[bg=default] "
                    mode_normal "#[fg=green,bold] NORMAL"
                    mode_pane "#[fg=yellow,bold] PANE"
                    tab_normal "#[fg=#6272A4] {name}"
                    tab_active "#[fg=cyan,bold] {name}"
                    command_git_branch_command "git branch --show-current 2>/dev/null"
                    command_git_branch_format "#[fg=magenta] {stdout}"
                    command_git_branch_interval "5"
                    datetime "#[fg=#6272A4] {format}"
                    datetime_format "%H:%M"
                }
            }
            pane split_direction="horizontal" {
                pane size="65%" focus=true
                pane size="35%" split_direction="vertical" {
                    pane
                    pane
                    pane
                    pane
                }
            }
            pane size=2 borderless=true {
                plugin location="zellij:status-bar"
            }
        }
    }

    swap_tiled_layout name="focus" {
        // Just editor, minimal distractions
        tab {
            pane size=1 borderless=true {
                plugin location="file:~/.config/zellij/plugins/zjstatus.wasm" {
                    format_left "#[fg=blue,bold]{session} {mode}"
                    format_center "{tabs}"
                    format_right "{command_git_branch} {datetime}"
                    format_space "#[bg=default] "
                    mode_normal "#[fg=green,bold] NORMAL"
                    mode_pane "#[fg=yellow,bold] PANE"
                    tab_normal "#[fg=#6272A4] {name}"
                    tab_active "#[fg=cyan,bold] {name}"
                    command_git_branch_command "git branch --show-current 2>/dev/null"
                    command_git_branch_format "#[fg=magenta] {stdout}"
                    command_git_branch_interval "5"
                    datetime "#[fg=#6272A4] {format}"
                    datetime_format "%H:%M"
                }
            }
            pane focus=true
            pane size=2 borderless=true {
                plugin location="zellij:status-bar"
            }
        }
    }

    // ─── Swap Floating Layouts (Alt+f toggles floating, Alt+{ / Alt+} cycles) ───

    swap_floating_layout name="tool" {
        // Single large floating pane (90% of screen)
        floating_panes max_panes=1 {
            pane {
                x "5%"
                y "5%"
                width "90%"
                height "85%"
            }
        }
    }

    swap_floating_layout name="stacked" {
        // Multiple floating panes stacked
        floating_panes max_panes=4 {
            pane {
                x "10%"
                y "5%"
                width "80%"
                height "40%"
            }
            pane {
                x "10%"
                y "50%"
                width "80%"
                height "40%"
            }
        }
    }

    swap_floating_layout name="side-by-side" {
        // Two floating panes side by side
        floating_panes max_panes=2 {
            pane {
                x "2%"
                y "5%"
                width "46%"
                height "85%"
            }
            pane {
                x "52%"
                y "5%"
                width "46%"
                height "85%"
            }
        }
    }
}
